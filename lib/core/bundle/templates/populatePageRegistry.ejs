"use strict";

var pageRegistry = require("../PageLoader.class.js").bundles;

function populatePageRegistry() {
    var pageBundle;

<% _(pages).each(function eachPage(fullPath, pageURL)  {

if (isClassFile(fullPath)) { %>
pageBundle = require("bundle?lazy!" + <%= JSON.stringify(fullPath) %>);
<% } else { %>
pageBundle = require("bundle?lazy!raw!" + <%= JSON.stringify(fullPath) %>);
<% } %>

pageRegistry[<%= JSON.stringify(pageURL) %>] = pageBundle;

<% }); %>

    return pageRegistry;
}

module.exports = populatePageRegistry;