"use strict";

var alamidIndex = require("alamid/lib/index.js");

function initAlamid() {
    var App = require("alamid/lib/client/App.class.js"),
        MainPage = require("../../app/pages/MainPage.class.js");

    alamidIndex.app = new App(MainPage);
}

function initRegistries() {
    require("./fillPageRegistry.js");
}

function initClient() {
    require("../../app/init.client.js");
}

function initConfig() {
    var config = {};

    <% _(clientConfig).each(function assignClientConfigValue(value, key) { %>
    config.<%= key %> = <%= toSrc(value) %>;
    <% }); %>

    alamidIndex.config = config;
}

initConfig();
initAlamid();
initRegistries();
initClient();